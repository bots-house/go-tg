swagger: "2.0"

info:
  version: v1
  title: Birzzha

host: localhost:8000
basePath: /v1
schemes:
  - http

tags:
  - name: auth
    description: |
      –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
      –¢–æ–∫–µ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ (`X-Token`) –∏–ª–∏ query –ø–∞—Ä–∞–º–µ—Ç—Ä (`token`).
      –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π API –≤–µ—Ä–Ω–µ—Ç –æ—Ç–≤–µ—Ç  **403 Forbidden** –∏–ª–∏ **401 Unauthorized**.
      –¢–æ–∫–µ–Ω—ã –∂–∏–≤—É—Ç –≤ —Ç–µ—á–µ–Ω–∏–∏ 24 —á–∞—Å–æ–≤.
      –í—Ä–µ–º—è –Ω–∞ –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö —Å –≤–∏–¥–∂–µ—Ç–∞ 1 –º–∏–Ω—É—Ç–∞.

      ### üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Login Widget

      –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –Ω—É–∂–µ–Ω @username –±–æ—Ç–∞, –¥–ª—è –µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ `GET /v1/bot`.
      –ü–æ–ª—É—á–∏–≤ –¥–∞–Ω–Ω—ã–µ –æ—Ç Telegram –∏—Ö –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ `POST /v1/auth`.

      ### ü§ñ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞

      1. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ `/v1/auth/bot` —É–∫–∞–∑—ã–≤–∞—è `callback_url`, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—Ç –≤–µ—Ä–Ω—É—Ç—Å—è;
      2. API –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–æ—Ç–∞ –ø—Ä–æ–∫–∏–¥—ã–≤–∞—è deep-link –ø–∞—Ä–∞–º–µ—Ç—Ä;
      3. –ë–æ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `callback_url` –ø—Ä–æ–∫–∏–¥—ã–≤–∞—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Login Widget –≤ query string;

      –í –∫–∞—á–µ—Å—Ç–≤–µ —Ö–æ—Å—Ç–∞ –≤ `callback_url` –º–æ–∂–µ—Ç –≤—ã—Å—Ç—É–ø–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–æ–º–µ–Ω—ã, —Å–≤—è–∑–∞–Ω–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å –ª–∏–º–∏—Ç–∞–º–∏ Telegram.

      | Env | Host |
      |:----|:-----|
      | Staging | dev.birzzha.me |
      | Production | birzzha.me  |

  - name: catalog
    description: |
      üóÑ–í –¥–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ —Å–æ–±—Ä–∞–Ω–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

      –°—É—â–µ—Å—Ç–≤—É—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏:
       - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è (`topic`)
       - –æ–±—ä—è–≤–ª–µ–Ω–∏–µ (`lot`)
  - name: personal-area
    description: |
      –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  - name: bot
    description: |
      –°–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º.

  - name: landing
    description: |
      –°–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥–µ.

  - name: webhook
    description: |
      –°–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

consumes:
  - application/json

produces:
  - application/json

securityDefinitions:
  TokenHeader:
    type: apiKey
    in: header
    name: X-Token
  TokenQuery:
    type: apiKey
    in: query
    name: token

security:
  - TokenHeader: []
  - TokenQuery: []

parameters:
  RequestID:
    in: header
    name: X-Request-Id
    type: string
    format: uuid
    required: false
    description: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–ø—Ä–æ—Å–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞.

paths:
  /user:
    get:
      summary: Get Current User
      operationId: getUser
      tags: [auth]
      parameters:
        - $ref: "#/parameters/RequestID"
      description: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.
      responses:
        200:
          description: OK
          schema:
            $ref: "#/definitions/User"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

  /auth:
    post:
      summary: Create Token
      operationId: createToken
      tags: [auth]
      parameters:
        - $ref: "#/parameters/RequestID"
        - in: body
          name: payload
          schema:
            $ref: "#/definitions/InputAuth"
      description: |
        –ü–æ–ª—É—á–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—Ç Telegram,
        –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö c [Telegram Login Widget](https://core.telegram.org/widgets/login) –∏ [LoginUrl](https://core.telegram.org/bots/api#loginurl).
        –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–∏ 24 —á–∞—Å–æ–≤, —Å –º–æ–º–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è.

        –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏:
          - `telegram_widget_info_expired` - –µ—Å–ª–∏ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –≤–∏–¥–∂–µ—Ç–∞ –ø—Ä–æ—à–ª–æ –±–æ–ª–µ–µ 1 –º–∏–Ω—É—Ç—ã;
          - `telegram_widget_info_invalid` - –µ—Å–ª–∏ –ø–æ–¥–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö (`hash`) –Ω–µ–≤–∞–ª–∏–¥–Ω–∞;
      security: []
      responses:
        201:
          description: Created
          schema:
            $ref: "#/definitions/Token"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

  /auth/bot:
    get:
      summary: Login via Bot
      tags: [auth]
      operationId: loginViaBot
      security: []
      description:
        –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram.
        Telegram –±–æ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –µ–≥–æ –Ω–∞ `callback_url` –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏ [LoginUrl](https://core.telegram.org/bots/api/#loginurl).
      parameters:
        - $ref: "#/parameters/RequestID"
        - in: query
          name: callback_url
          type: string
          required: true
          format: url
          description: URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞
      responses:
        302:
          description: Found
          headers:
            Location:
              type: string
              format: url
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"
  /bot:
    get:
      summary: Get Bot Info
      operationId: getBotInfo
      description: |
        –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ—Ç–µ
      tags: [bot]
      security: []
      responses:
        200:
          description: OK
          schema:
            $ref: "#/definitions/BotInfo"

    post:
      summary: Handle Update
      operationId: handleUpdate
      description: |
        –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è –æ—Ç Telegram. S2S –º–µ—Ç–æ–¥.
      tags: [bot]
      security: []
      parameters:
        - $ref: "#/parameters/RequestID"
        - in: body
          name: payload
          required: true
          schema:
            $ref: "#/definitions/TelegramUpdate"
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        500:
          description: Internal Server Error

  /topics:
    get:
      summary: Get Topics
      operationId: getTopics
      description: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.
      tags: [catalog]
      security: []
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: "#/definitions/Topic"
        500:
          description: Internal Server Error

  /reviews:
    get:
      summary: Get Reviews
      operationId: getReviews
      description: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤.
      tags: [landing]
      security: []
      parameters:
        - in: query
          name: offset
          type: integer
          required: false
          description: –û—Ñ—Å–µ—Ç –æ—Ç–∑—ã–≤–æ–≤.
        - in: query
          name: limit
          type: integer
          required: false
          description: –õ–∏–º–∏—Ç –æ—Ç–∑—ã–≤–æ–≤.
      responses:
        200:
          description: OK
          schema:
            $ref: "#/definitions/ReviewList"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

  /tg/resolve:
    get:
      summary: Resolve Telegram Identity
      operationId: resolveTelegram
      tags: [catalog]
      description: |
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ Telegram-—Å—É—â–Ω–æ—Å—Ç–∏ (–∫–∞–Ω–∞–ª—ã –∏ —á–∞—Ç) –ø–æ @username –∏–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π —Å—Å—ã–ª–∫–µ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ).
        –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –∏–ª–∏ @username **–Ω–µ –≤–∞–∂–Ω–æ** (–µ—Å—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª –∏–ª–∏ –Ω–µ—Ç, –¥–æ–º–µ–Ω, @ –≤ –Ω–∞—á–∞–ª–∞).

        ### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤

          - https://t.me/channely_updates
          - t.me/crosser_live
          - crosser_chat
          - @zzapusk

        ### –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

        | Status | Code | Description |
        |:---------|:--------------|:-----------------|
        | 400 | `tg_invalid_query` | –ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π —Ñ–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞ |
        | 400 | `tg_entity_not_found` | –°—É—â–Ω–æ—Å—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ |
        | 500 | `internal_error` | –í–Ω—É—Ç—Ä–µ–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |

      security: []
      parameters:
        - $ref: "#/parameters/RequestID"
        - in: query
          name: q
          type: string
          required: true
          description: –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      responses:
        200:
          description: OK
          schema:
            $ref: "#/definitions/TelegramResolveResult"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

  /user/lots:
    get:
      summary: Get User Lots
      operationId: getUserLots
      tags: ["personal-area"]
      description: |
        –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ª–æ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: "#/definitions/OwnedLot"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

    post:
      summary: Create Lot
      operationId: createLot
      tags: ["personal-area"]
      description: |
        –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ—Ç–∞.
        –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å ID –∫–∞–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `/tg/resolve` –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ –≤ –∑–∞–ø—Ä–æ—Å–µ –∫–∞–∫ `telegram_id`.

        ### –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

        | Status | Code | Description |
        |:---------|:--------------|:-----------------|
        | 400 | `lot_is_not_channel` | –ª–æ—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–∞–Ω–∞–ª–æ–º |
        | 500 | `internal_error` | –í–Ω—É—Ç—Ä–µ–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |
      parameters:
        - in: body
          name: payload
          required: true
          schema:
            $ref: "#/definitions/LotInput"
      responses:
        201:
          description: Created
          schema:
            $ref: "#/definitions/OwnedLot"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

  /lots:
    get:
      summary: Get Lots
      operationId: getLots
      tags: [catalog]
      description: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ª–æ—Ç–æ–≤.
      parameters:
        - in: query
          name: topics
          description: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ ID –∫–∞—Ç–µ–≥–æ—Ä–∏–π
          type: array
          items:
            type: integer

        - in: query
          name: members_count_from
          description: –û—Ç –∫–æ–ª-–≤–∞ –ø–¥–ø
          type: integer

        - in: query
          name: members_count_to
          description: –î–æ –∫–æ–ª-–≤–∞ –ø–¥–ø
          type: integer

        - in: query
          name: price_from
          description: –¶–µ–Ω–∞ –æ—Ç
          type: integer

        - in: query
          name: price_to
          description: –¶–µ–Ω–∞ –¥–æ
          type: integer

        - in: query
          name: price_per_member_from
          description: –¶–µ–Ω–∞ –ø–¥–ø –æ—Ç
          type: number

        - in: query
          name: price_per_member_to
          description: –¶–µ–Ω–∞ –ø–¥–ø –¥–æ
          type: number

        - in: query
          name: daily_coverage_from
          description: —Å—É—Ç–æ—á–Ω—ã–π –æ—Ö–≤–∞—Ç –æ—Ç
          type: integer

        - in: query
          name: daily_coverage_to
          description: —Å—É—Ç–æ—á–Ω—ã–π –æ—Ö–≤–∞—Ç –¥–æ
          type: integer

        - in: query
          name: price_per_view_from
          description: –¶–µ–Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ç
          type: number

        - in: query
          name: price_per_view_to
          description: –¶–µ–Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ
          type: number

        - in: query
          name: monthly_income_from
          description: –ú–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥ –æ—Ç
          type: integer

        - in: query
          name: monthly_income_to
          description: –ú–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥ –¥–æ
          type: integer

        - in: query
          name: payback_period_from
          description: –û–∫—É–ø–∞–µ–º–æ—Å—Ç—å –≤ –º–µ—Å–∞—Ü–∞—Ö –æ—Ç
          type: number

        - in: query
          name: payback_period_to
          description: –û–∫—É–ø–∞–µ–º–æ—Å—Ç—å –≤ –º–µ—Å–∞—Ü–∞—Ö –¥–æ
          type: number

        - in: query
          name: sort_by
          type: string
          enum:
            - members_count
            - price
            - price_per_member
            - price_per_view
            - daily_coverage
            - monthly_income
            - payback_period
            - created_at
          default: created_at

        - in: query
          name: sort_by_type
          type: string
          enum:
            - asc
            - desc
          default: desc
          description: —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç –º–µ–Ω—å—à–µ–≥–æ –∫ –±–æ–ª—å—à–µ–º—É (`asc`), –∏–ª–∏ –æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É (`desc`)

        - in: query
          name: offset
          type: integer
          description: —Å–¥–≤–∏–≥ –Ω–∞—á–∞–ª–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ–¥–∏–Ω–∏—Ü

        - in: query
          name: limit
          type: integer
          description: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –∑–∞–ø—Ä–æ—Å

      security:
        - {}
        - TokenHeader: []
        - TokenQuery: []
      responses:
        200:
          description: OK
          schema:
            $ref: "#/definitions/LotList"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

  /lots/{id}:
    parameters:
      - name: id
        in: path
        type: integer
        required: true
        description: ID –ª–æ—Ç–∞
    get:
      summary: Get Lot
      description: –ü–æ–ª—É—á–∏—Ç—å –ª–æ—Ç.
      operationId: getLot
      tags: [catalog]
      security:
        - {}
        - TokenHeader: []
        - TokenQuery: []
      responses:
        200: 
          description: OK
          schema: 
            $ref: "#/definitions/FullLot"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

  /lots/{id}/favorite:
    parameters:
      - name: id
        in: path
        type: integer
        required: true
        description: ID –ª–æ—Ç–∞
    post:
      summary: Change Favorite Status
      description: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –ª–æ—Ç–∞.
      operationId: toggleLotFavorite
      tags: [catalog]
      responses:
        200: 
          description: OK
          schema: 
            $ref: "#/definitions/LotFavoriteStatus"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"
  
  /lots/{id}/similars:
    parameters:
      - name: id
        in: path
        type: integer
        required: true
        description: ID –ª–æ—Ç–∞
      - in: query
        name: offset
        type: integer
        required: false
        description: –û—Ñ—Å–µ—Ç –ø–æ—Ö–æ–∂–∏—Ö –ª–æ—Ç–æ–≤.
        default: 0
      - in: query
        name: limit
        type: integer
        required: false
        description: –õ–∏–º–∏—Ç –ø–æ—Ö–æ–∂–∏—Ö –ª–æ—Ç–æ–≤.
        default: 10
    get:
      summary: Get Similar Lots
      description: –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Ö–æ–∂–∏–µ –ª–æ—Ç—ã.
      operationId: getSimilarLots
      tags: [catalog]
      security: []
      responses:
        200:
          description: OK
          schema:
            $ref: "#/definitions/LotList"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"      

  /lots/filter-boundaries:
    get:
      summary: Get Filter Boundaries
      description: –ü–æ–ª—É—á–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
      operationId: getFilterBoundaries
      security: []
      parameters:
        - name: topics
          in: query
          type: array
          description: ID –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥—Ä–∞–Ω–∏—Ü
          items:
            type: integer

      tags: [catalog]
      responses:
        200:
          description: OK
          schema:
            $ref: "#/definitions/LotFilterBoundaries"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

  /lots/{id}/application-invoice:
    parameters:
      - name: id
        in: path
        type: integer
        required: true
        description: ID –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –ª–æ—Ç–∞
    get:
      summary: Get Application Invoice
      description: |
        –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –æ–ø–ª–∞—Ç—ã –æ–±—ä—è–≤–ª–µ–Ω–∏—è.
      operationId: getApplicationInovice
      tags: ["personal-area"]
      responses:
        200:
          description: OK
          schema:
            $ref: "#/definitions/ApplicationInvoice"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

  /lots/{id}/application-payment:
    parameters:
      - name: id
        in: path
        type: integer
        required: true
        description: ID –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –ª–æ—Ç–∞
    post:
      summary: Create Application Payment
      parameters:
        - in: query
          name: gateway
          required: true
          type: string
          enum: [interkassa, direct]
      description: |
        –°–æ–∑–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É.
      operationId: createApplicationPayment
      tags: ["personal-area"]
      responses:
        201:
          description: Created
          schema:
            $ref: "#/definitions/PaymentForm"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"
  /payments/{id}/status:
    parameters:
      - name: id
        in: path
        type: integer
        required: true
        description: ID –ø–ª–∞—Ç–µ–∂–∞
    get:
      summary: Get Payment Status
      description: |
        –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ –ø–æ –µ–≥–æ ID.
      operationId: getPaymentStatus
      tags: ["personal-area"]
      responses:
        200:
          description: OK
          schema:
            $ref: "#/definitions/PaymentStatus"
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

  /webhooks/gateways/{name}:
    parameters:
      - name: name
        type: string
        in: path
        required: true
        enum: [interkassa]

    post:
      operationId: handleGatewayNotification
      summary: Handle Gateway Notification
      description: |
        –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–ª–∞—Ç–∂–∞
      tags: [webhook]
      consumes:
        - "application/x-www-form-urlencoded"
      security: []
      responses:
        200:
          description: OK
        400:
          description: Bad Request
          schema:
            $ref: "#/definitions/Error"
        500:
          description: Internal Server Error
          schema:
            $ref: "#/definitions/Error"

definitions:
  PaymentStatus:
    type: object
    required:
      - status
      - lot_id
      - purpose
    properties:
      status:
        type: string
        description: –°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
        enum:
          - created
          - pending
          - success
          - failed
      lot_id:
        type: integer
        description: ID –ª–æ—Ç–∞ –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –¥–∞–Ω–Ω–æ–º—É –ø–ª–∞—Ç–µ–∂—É
      purpose:
        type: string
        description: –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã (—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã).
        enum:
          - application
          - change_price

  PaymentForm:
    type: object
    required:
      - method
      - action
      - values
    properties:
      method:
        type: string
        description: –º–µ—Ç–æ–¥ —Å –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å
        enum: [POST, GET]
      action:
        type: string
        format: url
        description: URL –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å
      values:
        type: array
        items:
          type: object
          required: [key, value]
          properties:
            key:
              type: string
            value:
              type: string

  ApplicationInvoice:
    type: object
    required:
      - lot
      - price
      - gateways
    properties:
      lot:
        $ref: "#/definitions/OwnedLot"
      price:
        description: –¶–µ–Ω–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
        $ref: "#/definitions/Money"
      cashier:
        type: object
        description: |
          –°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ã —á–µ–ª–æ–≤–µ–∫–∞ –¥–ª—è –ø—Ä–∏–µ–º–∞ –æ–ø–ª–∞—Ç –Ω–∞–ø—Ä—è–º—É—é.
        required:
          - username
          - link
        properties:
          username:
            type: string
          link:
            type: string
      gateways:
        type: array
        items:
          type: string
          enum:
            - interkassa
            - direct

  Money:
    type: object
    required:
      - currency
      - amount
    properties:
      currency:
        description: –í–∞–ª—é—Ç–∞ (USD, RUB, ...)
        type: string
      amount:
        description: –°—É–º–º–∞
        type: number

  LotFilterBoundaries:
    type: object
    required:
      - members_count
      - price
      - price_per_member
      - price_per_view
      - daily_coverage
      - monthly_income
      - payback_period
    properties:
      members_count:
        $ref: "#/definitions/IntBoundaries"
      price:
        $ref: "#/definitions/IntBoundaries"
      price_per_member:
        $ref: "#/definitions/FloatBoundaries"
      price_per_view:
        $ref: "#/definitions/FloatBoundaries"
      daily_coverage:
        $ref: "#/definitions/IntBoundaries"
      monthly_income:
        $ref: "#/definitions/IntBoundaries"
      payback_period:
        $ref: "#/definitions/FloatBoundaries"

  FloatBoundaries:
    type: object
    required:
      - from
      - to
    properties:
      from:
        type: number
        description: –æ—Ç
      to:
        type: number
        description: to

  IntBoundaries:
    type: object
    required:
      - from
      - to
    properties:
      from:
        type: integer
        description: –æ—Ç
      to:
        type: integer
        description: to

  LotList:
    type: object
    description: –°–ø–∏—Å–æ–∫ –ª–æ—Ç–æ–≤
    required:
      - total
      - items
    properties:
      total:
        type: integer
        description: –∫–æ–ª-–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–¥—Ö–æ–¥—â–∏—Ö –ø–æ–¥ —Ñ–∏–ª—å—Ç—Ä
      items:
        type: array
        items:
          $ref: "#/definitions/LotListItem"

  LotListItem:
    type: object
    description: –≠–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –ª–æ—Ç–æ–≤
    required:
      - id
      - name
      - avatar
      - link
      - username
      - price
      - comment
      - metrics
      - in_favorites
      - created_at
    properties:
      id:
        type: integer
        description: ID –ª–æ—Ç–∞
      name:
        type: string
        description: –ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ—Ç–∞ (–∫–∞–Ω–∞–ª–∞) –≤ Telegram
      avatar:
        type: string
        format: url
        description: –ê–≤–∞—Ç–∞—Ä–∫–∞ –ª–æ—Ç–∞
      username:
        type: string
        description: "@username –∫–∞–Ω–∞–ª–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)"
      link:
        type: string
        description: –°—Å—ã–ª–∫–∞ –¥–ª—è –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è (–∫–∞–∫ –ø—Ä–∏–≤–∞—Ç–Ω–∞—è —Ç–∞–∫ –∏ –ø—É–±–ª–∏—á–Ω–∞—è)
        format: url
      price:
        $ref: "#/definitions/LotPrice"
      comment:
        type: string
        description: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ª–æ—Ç—É
      metrics:
        $ref: "#/definitions/LotMetrics"
      topics:
        type: array
        items:
          type: integer
          minLength: 1
          maxLength: 3
      in_favorites:
        type: boolean
        description: True, –µ—Å–ª–∏ –ª–æ—Ç –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º
      created_at:
        type: integer
        description: –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

  OwnedLot:
    type: object
    description: –î–∞–Ω–Ω—ã–µ –ª–æ—Ç–∞ –∫–æ—Ç–æ—Ä—ã–º –≤–ª–∞–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    required:
      - id
      - external_id
      - name
      - avatar
      - username
      - link
      - bio
      - price
      - comment
      - status
      - metrics
      - topics
      - extra
      - created_at
      - paid_at
      - approved_at
      - published_at
    properties:
      id:
        type: integer
        description: ID –ª–æ—Ç–∞
      external_id:
        type: integer
        description: ID –ª–æ—Ç–∞ –≤ Telegram
      name:
        type: string
        description: –ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ—Ç–∞ (–∫–∞–Ω–∞–ª–∞) –≤ Telegram
      avatar:
        type: string
        format: url
        description: –ê–≤–∞—Ç–∞—Ä–∫–∞ –ª–æ—Ç–∞
      username:
        type: string
        description: "@username –∫–∞–Ω–∞–ª–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)"
      link:
        type: string
        description: –°—Å—ã–ª–∫–∞ –¥–ª—è –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è (–∫–∞–∫ –ø—Ä–∏–≤–∞—Ç–Ω–∞—è —Ç–∞–∫ –∏ –ø—É–±–ª–∏—á–Ω–∞—è)
        format: url
      bio:
        type: string
        description: –û–ø–∏—Å–∞–Ω–∏–∫ –∫–∞–Ω–∞–ª–∞ —Å Telegram
      price:
        $ref: "#/definitions/LotPrice"
      comment:
        type: string
        description: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ª–æ—Ç—É
      metrics:
        $ref: "#/definitions/LotMetrics"
      status:
        type: string
        enum:
          - created
          - paid
          - published
          - declined
          - canceled
      created_at:
        type: integer
        description: –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
      paid_at:
        type: integer
        description: –î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã
      approved_at:
        type: integer
        description: –î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
      topics:
        type: array
        items:
          type: integer
          minLength: 1
          maxLength: 3
      actions:
        type: object
        required:
          - can_change_price_free
          - can_change_price_paid
          - can_cancel
        properties:
          can_change_price_free:
            type: boolean
          can_change_price_paid:
            type: boolean
          can_cancel:
            type: boolean
      extra:
        type: array
        items:
          $ref: "#/definitions/LotExtraResource"
      published_at:
        type: integer
        description: –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ –∫–∞–Ω–∞–ª–µ

  LotExtraResource:
    type: object
    properties:
      url:
        type: string
        format: url

  LotMetrics:
    type: object
    required:
      - members_count
      - daily_coverage
      - monthly_income
      - price_per_member
      - price_per_view
      - payback_period
    properties:
      members_count:
        type: integer
        description: –ö–æ–ª-–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –∫–∞–Ω–∞–ª–µ
      daily_coverage:
        type: integer
        description: –î–Ω–µ–≤–Ω–æ–π –æ—Ö–≤–∞—Ç
      monthly_income:
        type: integer
        description: –ü—Ä–∏–±—ã–ª—å –≤ –º–µ—Å—è—Ü
      price_per_member:
        type: number
        description: –¶–µ–Ω–∞ –∑–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞
      price_per_view:
        type: number
        description: –¶–µ–Ω–∞ –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä
      payback_period:
        type: number
        description: –û–∫—É–ø–∞–µ–º–æ—Å—Ç—å

  LotPrice:
    type: object
    required:
      - current
      - previous
      - is_bargain
    properties:
      current:
        type: integer
        description: –¶–µ–Ω–∞ –∫–∞–Ω–∞–ª–∞
      previous:
        type: integer
        description: –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ü–µ–Ω–∞ –∫–∞–Ω–∞–ª–∞
      is_bargain:
        type: boolean
        description: –í–æ–∑–º–æ–∂–µ–Ω –ª–∏ —Ç–æ—Ä–≥

  LotInput:
    type: object
    description: –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ª–æ—Ç–∞
    required:
      - query
      - telegram_id
      - topics
      - price
      - is_bargain
      - monthly_income
      - comment
      - extra
    properties:
      query:
        type: string
        description: –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, @username –∏–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞.
        example: "@channely_updates"
      telegram_id:
        type: integer
        description: ID –∫–∞–Ω–∞–ª–∞ –≤ Telegram
        example: -1001072262979
      topics:
        type: array
        description: –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ª–æ—Ç–∞
        example:
          - 1
          - 2
        items:
          type: integer
          minLength: 1
          maxLength: 3
      price:
        type: integer
        description: –¶–µ–Ω–∞ –∫–∞–Ω–∞–ª–∞
        example: 124000
      is_bargain:
        type: boolean
        description: –í–æ–∑–º–æ–∂–µ–Ω –ª–∏ —Ç–æ—Ä–≥?
      monthly_income:
        type: integer
        description: –î–æ—Ö–æ–¥ –≤ –º–µ—Å—è—Ü
        example: 7000
      comment:
        type: string
        description: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        example: |
          –ü—Ä–æ–¥–∞—é –¥–µ—à–µ–≤–ª–µ, —á–µ–º –∑–∞–ª–∏–ª. –ö–∞–Ω–∞–ª—É –º–µ—Å—è—Ü, –Ω–∞–ª–∏—Ç —Å–≤–µ–∂–∏–º —Ç–≥ —Ç—Ä–∞—Ñ–æ–º –∑–∞ –¥–≤–µ –Ω–µ–¥–µ–ª–∏. –í –∫–∞–Ω–∞–ª –≤–ª–æ–∂–µ–Ω–æ 250.000-260.000‚ÇΩ. –†–µ–∫–ª–∞–º—É –ø—Ä–æ–¥–∞—é –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 –Ω–µ–¥–µ–ª–∏. –ü—Ä–æ–¥–∞—é, —Ç–∞–∫ –∫–∞–∫ —Å–∞–º –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º–µ –Ω–µ–¥–∞–≤–Ω–æ, —Ç–∞–∫ –ø–æ–∏–≥—Ä–∞–ª–∏—Å—å —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º, –ø–æ—Å–º–æ—Ç—Ä–µ–ª–∏ —á—Ç–æ –∫ —á–µ–º—É, –∏–¥–µ–º –¥–∞–ª—å—à–µ!

      extra:
        type: array
        description: –°–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫ –Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
        items:
          type: string
        example:
          - https://t.me/channely_bot
          - https://t.me/channely_chat

  TelegramResolveResult:
    type: object
    description: –°—É—â–Ω–æ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Å—Ç–≤—É—é—â–∞—è –∑–∞–ø—Ä–æ—Å—É.
    properties:
      channel:
        type: object
        description: –ö–∞–Ω–∞–ª
        required:
          - id
          - name
          - avatar
          - members_count
          - username
          - daily_average
          - description
        properties:
          id:
            type: integer
            description: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–∞–Ω–∞–ª–∞ –≤ Telegram–∞
          name:
            type: string
            description: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
          avatar:
            type: string
            description: URL –∞–≤–∞—Ç–∞—Ä–∫–∏ –∫–∞–Ω–∞–ª–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)
          description:
            type: string
            description: –û–ø–∏—Å–∞–Ω–∏–µ
          members_count:
            type: integer
            description: –ö–æ–ª-–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –∫–∞–Ω–∞–ª–µ
          username:
            type: string
            description: username –∫–∞–Ω–∞–ª–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)
          daily_average:
            type: integer
            description: –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª-–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –≤ –¥–µ–Ω—å
      group:
        type: object
        description: –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç
        required:
          - id
          - name
          - avatar
          - members_count
          - username
          - daily_average
          - description
        properties:
          id:
            type: integer
            description: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —á–∞—Ç–∞ –≤ Telegrama
          name:
            type: string
            description: –ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞
          description:
            type: string
            description: –û–ø–∏—Å–∞–Ω–∏–µ
          avatar:
            type: string
            description: URL –∞–≤–∞—Ç–∞—Ä–∫–∏ —á–∞—Ç–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)
          members_count:
            type: integer
            description: –ö–æ–ª-–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —á–∞—Ç–µ
          username:
            type: string
            description: username —á–∞—Ç–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)

  Topic:
    type: object
    description: –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ª–æ—Ç–∞
    required:
      - id
      - name
      - slug
      - created_at
    properties:
      id:
        type: integer
        description: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
      name:
        type: string
        description: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º.
      slug:
        type: string
        description: Slug (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
      created_at:
        type: integer
        description: –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

  User:
    type: object
    description: –û–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    required:
      - id
      - telegram
      - first_name
      - last_name
      - avatar
      - is_admin
      - joined_at
    properties:
      id:
        type: integer
        description: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Birzzha.
      telegram:
        type: object
        description: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–∑ Telegram
        required:
          - id
          - username
        properties:
          id:
            type: integer
            description: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
          username:
            type: string
            description: Username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
      first_name:
        type: string
        description: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
      last_name:
        type: string
        description: –§–∞–º–∏–ª–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram (–º–æ–∂–µ—Ç –±—ã—Ç—å `null`)
      avatar:
        type: string
        description: Path to avatar
      is_admin:
        type: boolean
        description: True, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω Birzzha.
      joined_at:
        type: integer
        description: –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –±–∏—Ä–∂–µ, –≤ Unix-time.

  Error:
    type: object
    required:
      - code
      - description
    properties:
      code:
        type: string
        enum: [test]
        description: –ö–æ–¥ –æ—à–∏–±–∫–∏
      description:
        type: string
        description: –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏

  Identity:
    x-go-type:
      import:
        package: "github.com/bots-house/birzzha/api/authz"
        alias: authz
      type: Identity

  TelegramUpdate:
    x-go-type:
      import:
        package: "github.com/bots-house/telegram-bot-api"
        alias: tgbotapi
      type: Update

  InputAuth:
    description: –î–∞–Ω–Ω—ã–π –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å [Telegram Login Widget](https://core.telegram.org/widgets/login) –∏ [LoginUrl](https://core.telegram.org/bots/api#loginurl).
    required:
      - id
      - first_name
      - auth_date
      - hash
    properties:
      id:
        type: integer
        description: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
        example: 492933123
      first_name:
        type: string
        description: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
        example: Sasha
      last_name:
        type: string
        description: –§–∞–º–∏–ª–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
        example: Savchuk
      username:
        type: string
        description: Username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
      photo_url:
        type: string
        format: url
        description: –°—Å—ã–ª–∫–∞ –Ω–∞ –∞–≤–∞—Ä—Ç–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
      auth_date:
        type: integer
        format: int64
        description: –î–∞—Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (UNIX)
      hash:
        type: string
        description: –ü–æ–¥–ø–∏—Å–∏ –∫ –¥–∞–Ω–Ω—ã–º.

  Token:
    description: –¢–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API.
    required:
      - token
      - user
    properties:
      token:
        type: string
        description: JWT-—Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API.
      user:
        $ref: "#/definitions/User"

  BotInfo:
    description: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
    required:
      - name
      - username
      - auth_deep_link
    properties:
      name:
        type: string
        description: –ò–º—è –±–æ—Ç–∞
      username:
        type: string
        description: –Æ–∑–µ—Ä–Ω–µ–π–º –±–æ—Ç–∞
      auth_deep_link:
        type: string
        description: –ó–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `?start=` –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `LoginUrl`.

  ReviewUser:
    description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ—Ç–æ—Ä—ã–π –æ—Å—Ç–∞–≤–∏–ª –æ—Ç–∑—ã–≤.
    required:
      - first_name
      - last_name
      - username
      - avatar
    properties:
      first_name:
        type: string
        description: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
      last_name:
        type: string
        description: –§–∞–º–∏–ª–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–µ—Ç –±—ã—Ç—å null).
      username:
        type: string
        description: –Æ–∑–µ—Ä–Ω–µ–π–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–µ—Ç –±—ã—Ç—å null).
      avatar:
        type: string
        description: –°—Å—ã–ª–∫–∞ –Ω–∞ –∞–≤–∞—Ç–∞—Ä–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–µ—Ç –±—ã—Ç—å null).
  
  Review:
    description: –û—Ç–∑—ã–≤.
    required:
      - id
      - user
      - text
      - created_at
    properties:
      id:
        type: integer
        description: ID –æ—Ç–∑—ã–≤–∞.
      user:
        $ref: "#/definitions/ReviewUser"
      text:
        type: string
        description: –¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞.
      created_at:
        type: integer
        format: int64
        description: –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–∑—ã–≤–∞.

  ReviewList:
    description: –û—Ç–∑—ã–≤—ã –∏ –∏—Ö –∫–æ–ª–∏—á–µ—Ç—Å–≤–æ.
    required:
      - total
      - items
    properties:
      total:
        type: integer
        description: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤.
      items:
        type: array
        items:
          $ref: "#/definitions/Review"
  
  LotOwner:
    type: object
    description: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–∑–¥–∞—Ç–µ–ª–µ –ª–æ—Ç–∞.
    required:
      - first_name
      - last_name
      - username
      - avatar
      - link
    properties:
      first_name:
        type: string
        description: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
      last_name:
        type: string
        description: –§–∞–º–∏–ª–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–µ—Ç –±—ã—Ç—å null).
      username:
        type: string
        description: –Æ–∑–µ—Ä–Ω–µ–π–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–µ—Ç –±—ã—Ç—å null).
      avatar:
        type: string
        description: –°—Å—ã–ª–∫–∞ –Ω–∞ –∞–≤–∞—Ç–∞—Ä–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–µ—Ç –±—ã—Ç—å null).     
      link:
        type: string
        description: –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram (–º–æ–∂–µ—Ç –±—ã—Ç—å null). 
        
  FullLot:
    description: –î–µ—Ç–∞–ª–∏ –ª–æ—Ç–∞.
    allOf:
      - $ref: "#/definitions/LotListItem"
      - type: object
        properties:
          user:
            $ref: "#/definitions/LotOwner"
          extra:
            type: array
            items:
              $ref: "#/definitions/LotExtraResource"
          views:
            type: integer
            description: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤.
          tgstat_link:
            type: string
            description: –°—Å—ã–ª–∫–∞ –Ω–∞ tgstat.ru.
          telemetr_link:
            type: string
            description: –°—Å—ã–ª–∫–∞ –Ω–∞ telemetr.me.
        required:
          - views
          - extra
          - user
          - tgstat_link
          - telemetr_link
  
  LotFavoriteStatus:
    type: object
    description: –û—Ç–≤–µ—Ç –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã —Å—Ç–∞—Ç—É—Å–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –ª–æ—Ç–∞.
    required:
      - in_favorites
    properties:
      in_favorites:
        type: boolean
        description: –°—Ç–∞—Ç—É—Å –∏–∑–±—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –ª–æ—Ç–∞.


          

          






