version: "3.0"

volumes:
  postgres:
  redis:

services:
  postgres:
    image: postgres:12

    ports:
      - "5432:5432"

    environment:
      POSTGRES_USER: brz
      POSTGRES_PASSWORD: brz
      POSTGRES_DB: brz

    volumes:
      - postgres:/var/lib/postgresql/data

  redis:
    image: "redis:alpine"
    command: redis-server --appendonly yes
    volumes:
      - redis:/data
    ports:
      - 6379:6379

  web:
    image: docker.pkg.github.com/bots-house/birzzha-web/birzzha-web:latest
    ports:
      - 80:80
    environment: 
      NODE_ENV: development
      NUXT_ENV_API_URL: http://host.docker.internal:8000/v1
      NUXT_PORT: 80
      NUXT_HOST: 0.0.0.0
      YM_ID: 65444179

  admin:
    image: docker.pkg.github.com/bots-house/birzzha-admin/birzzha-admin:latest
    ports:
      - 8080:80
    environment:
      API_URL: http://host.docker.internal:8000/
      VUE_APP_API_URL: /api